#!/bin/sh
# Author: Vitaly Lipatov <lav@etersoft.ru>
# 2006, 2007, Public domain

# Print the distro version

# You can set ROOTDIR to your root dir
#ROOTDIR=
system_name()
{
if [ 'uname' = "FreeBSD" ] ; then
	echo "freebsd"
elif [ -f $ROOTDIR/etc/slackware-version ] ; then
	echo "slackware"
elif [ -f $ROOTDIR/etc/debian_version ] ; then
	echo "debian"
elif [ -f $ROOTDIR/etc/altlinux-release ] ; then
	echo "alt"
elif [ -f $ROOTDIR/etc/Mandriva-release ] ; then
	echo "mandriva"
elif [ -f $ROOTDIR/etc/Mandrake-release ] ; then
	echo "mandrake"
elif [ -f $ROOTDIR/etc/asplinux-release ] ; then
	echo "asplinux"
elif [ -f $ROOTDIR/etc/redhat-release ] ; then
	echo "redhat"
elif [ -f $ROOTDIR/etc/SuSe-release ] ; then
	echo "suse"
else
	echo "generic"
fi
}

case $1 in
	-p)
		case `system_name` in
			freebsd) echo "pkg" ;;
			slackware|mopslinux) echo "tgz" ;;
			debian|ubuntu) echo "deb" ;;
			alt|asplinux|redhat|suse|madriva|mandrake) echo "rpm" ;;
			*) echo "rpm" ;;
		esac
		exit 0
		;;
	-h)
		echo "-p print type of packaging system"
		echo "-h this help"
		exit 0
		;;
	*) system_name ;;
esac

# TODO: Ubuntu, SuSe, MOPSLinux Fedora, Mandriva
# TODO: check for release