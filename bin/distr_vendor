#!/bin/sh
# Author: Vitaly Lipatov <lav@etersoft.ru>
# 2006, 2007, Public domain

# Print the distro version

# You can set ROOTDIR to your root dir
#ROOTDIR=
system_name()
{
if [ 'uname' = "FreeBSD" ] ; then
	echo "freebsd"
elif [ -f $ROOTDIR/etc/slackware-version ] ; then
	echo "slackware"
elif [ -f $ROOTDIR/etc/debian_version ] ; then
	echo "debian"
elif [ -f $ROOTDIR/etc/altlinux-release ] ; then
	echo "alt"
elif [ -f $ROOTDIR/etc/mandriva-release ] ; then
	echo "mandriva"
elif [ -f $ROOTDIR/etc/mandrake-release ] ; then
	echo "mandriva"
elif [ -f $ROOTDIR/etc/asplinux-release ] ; then
	if grep Karelia $ROOTDIR/etc/asplinux-release >/dev/null 2>&1 ; then
		echo "ASPLinux/10"
	else
		echo "asplinux"
	fi
elif [ -f $ROOTDIR/etc/redhat-release ] ; then
	echo "redhat"
elif [ -f $ROOTDIR/etc/SuSe-release ] ; then
	echo "suse"
elif [ -f $ROOTDIR/etc/SuSE-release ] ; then
	echo "suse"
elif [ -d $ROOTDIR/etc/YaST2 ] ; then
	echo "suse"
else
	echo "generic"
fi
}

case $1 in
	-p)
		case `system_name` in
			freebsd) echo "pkg" ;;
			slackware|mopslinux) echo "tgz" ;;
			debian|ubuntu) echo "deb" ;;
			alt|asplinux|fedora|redhat|suse|madriva|mandrake) echo "rpm" ;;
			*) echo "rpm" ;;
		esac
		exit 0
		;;
	-h)
		echo "-p print type of packaging system"
		echo "-h this help"
		exit 0
		;;
	*) system_name ;;
esac

# TODO: Ubuntu, MOPSLinux, Fedora, Mandriva
# TODO: check for release
